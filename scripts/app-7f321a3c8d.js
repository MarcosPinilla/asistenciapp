function routesConfig(t,e,n,r){n.html5Mode(!0).hashPrefix("!"),e.otherwise("login"),t.state("login",{url:"/login",component:"login",isPrivate:!1}).state("dashboard",{url:"/dashboard",component:"dashboard",isPrivate:!0}),r.interceptors.push("InterceptorApi")}function middlewareConfig(t,e,n){n.onStart({},function(n){var r=n.$to().isPrivate,o=(n.$to().isPago,n.$to().name);r&&!e.isLogged()&&t.go("login"),"login"===o&&e.isLogged()&&t.go("dashboard.publicaciones")})}routesConfig.$inject=["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider"],middlewareConfig.$inject=["$state","CredentialsService","$transitions"],angular.module("app",["ui.router","ngResource","ngMaterial"]).config(["$mdThemingProvider",function(t){t.theme("app").primaryPalette("green").accentPalette("lime").warnPalette("red"),t.theme("dark-grey").backgroundPalette("grey").dark().primaryPalette("grey"),t.theme("dark-green").backgroundPalette("green").dark().primaryPalette("green"),t.theme("dark-orange").backgroundPalette("orange").dark().primaryPalette("orange"),t.theme("dark-purple").backgroundPalette("deep-purple").dark().primaryPalette("deep-purple"),t.theme("dark-blue").backgroundPalette("blue").dark().primaryPalette("blue")}]).constant("API","https://iot.jorgesolis.me/api/"),function(){"use strict";function t(t,e,n){var r=this;r.isLogged=t.isLogged(),r.logout=function(){t.clearCredentials(),r.isLogged=!1,e.go("login")},n.$on("isLogin",function(){r.isLogged=!0})}angular.module("app").component("myToolbar",{templateUrl:"app/components/toolbar/toolbar.html",controller:t,controllerAs:"vm"}),t.$inject=["CredentialsService","$state","$rootScope"]}(),function(){"use strict";function t(t,e){return t(e+"peliculas/:id",{id:"@id"})}angular.module("app").service("PeliculasService",t),t.$inject=["$resource","API"]}(),function(){"use strict";function t(t){var e=this;e.peliculas=[],t.query().$promise.then(function(t){e.peliculas=t})}angular.module("app").component("peliculas",{templateUrl:"app/components/peliculas/peliculas.html",controller:t,controllerAs:"vm"}),t.$inject=["PeliculasService"]}(),function(){"use strict";function t(t,e){return t(e+"login")}angular.module("app").service("LoginService",t),t.$inject=["$resource","API"]}(),function(){"use strict";function t(t,e,n,r){var o=this;o.loginError=!1,o.credentials={},o.login=function(n){t.save(n,function(t){e.setToken(t.token),e.setUser(t.email),r.$emit("isLogin")},function(t){o.loginError=!0})},o.login=function(a){t.save(a,function(t){t.token?(e.setToken(t.token),e.setUser(t.email),r.$emit("isLogin"),n.go("dashboard")):o.loginError=!0},function(t){console.log(t)})}}angular.module("app").component("login",{templateUrl:"app/components/login/login.html",controller:t,controllerAs:"vm"}),t.$inject=["LoginService","CredentialsService","$state","$rootScope"]}(),function(){"use strict";function t(t){var e=this;e.request=function(e){return e.headers.Authorization=t.getToken()||"",e.headers.Accept="application/json",e},e.responseError=function(e){return 401===e.status&&t.clearCredentials(),e}}angular.module("app").service("InterceptorApi",t),t.$inject=["CredentialsService"]}(),function(){"use strict";function t(){this.setToken=function(t){localStorage.setItem("token",t)},this.getToken=function(){return localStorage.getItem("token")},this.setUser=function(t){localStorage.setItem("user",t)},this.getUser=function(){return localStorage.getItem("user")},this.clearCredentials=function(){localStorage.removeItem("token"),localStorage.removeItem("user")},this.isLogged=function(){return!(!this.getToken()||!this.getUser())}}angular.module("app").service("CredentialsService",t)}(),function(){"use strict";function t(t){var e=this;e.asignaturas={},t.query().$promise.then(function(t){e.asignaturas=t,console.log(e.asignaturas)})}angular.module("app").component("dashboard",{templateUrl:"app/components/dashboard/dashboard.html",controller:t,controllerAs:"vm"}),t.$inject=["AsignaturaService"]}(),function(){"use strict";function t(t,e){return t(e+"asignaturaprofesor")}angular.module("app").service("AsignaturaService",t),t.$inject=["$resource","API"]}(),angular.module("app").run(["$templateCache",function(t){t.put("app/components/asignaturas/asignaturas.html",'<div layout="row" layout-align="start">\r\n    <h1>Mis Asignaturas</h1>\r\n</div>'),t.put("app/components/asistencias/asistencias.html",""),t.put("app/components/dashboard/dashboard.html",'<div layout="row" layout-align="center start">\r\n    <h1>Panel de Control</h1>\r\n</div>\r\n\r\n<div layout layout-wrap>\r\n    <md-card md-colors="{background: \'blue-900\'}" flex="30" flex-xs="100" ng-repeat="asignatura in vm.asignaturas">\r\n      <md-card-title>\r\n        <md-card-title-text>\r\n          <span class="md-headline">{{ asignatura.nombre }}</span>\r\n        </md-card-title-text>\r\n      </md-card-title>\r\n      <md-card-content>\r\n        <p>Código: {{ asignatura.codigo }}</p>\r\n        <p>Descripcion: {{ asignatura.descripcion }}</p>\r\n      </md-card-content>\r\n      <md-card-actions layout="row" layout-align="start center">\r\n        <md-button class="md-raised">Ver Asignatura</md-button>\r\n      </md-card-actions>\r\n    </md-card>\r\n  \r\n</div>'),t.put("app/components/login/login.html",'<div layout="row" layout-align="center start">\r\n  <h1>Iniciar Sesión</h1>\r\n</div>\r\n\r\n<div flex-gt-md="50" flex-offset-gt-md="25" flex-xs="90" flex-offset-xs="5">\r\n\t<form ng-submit="vm.login(vm.credentials)">\r\n\t\t<div layout="column">\r\n\t\t<md-input-container class="md-icon-float md-block" flex="50">\r\n\t\t\t\t<label>Email</label>\r\n\t\t\t\t<input ng-model="vm.credentials.email" type="text" required>\r\n\t\t\t</md-input-container>\t\r\n\r\n\t\t\t<md-input-container class="md-icon-float md-block" flex>\r\n\t\t\t\t<label>Contraseña</label>\r\n\t\t\t\t<input ng-model="vm.credentials.password" type="password" required>\r\n\t\t\t</md-input-container>\t\r\n\t\t\t<span ng-if="vm.loginError" style="color: red">Credenciales erroneas</span>\r\n\t\t<md-button type="submit" class="login-button" flex>Entrar</md-button>\r\n\t</div>\r\n\t</form>\r\n</div>\r\n'),t.put("app/components/peliculas/peliculas.html",'<div layout="row" layout-align="center start">\r\n  <h1>Peliculas</h1>\r\n</div>\r\n\r\n<div layout layout-wrap>\r\n  <md-card md-colors="{background: \'blue-900\'}" flex="30" flex-xs="100" ng-repeat="pelicula in vm.peliculas">\r\n    <md-card-title>\r\n      <md-card-title-text>\r\n        <span class="md-headline">{{ pelicula.titulo }}</span>\r\n      </md-card-title-text>\r\n    </md-card-title>\r\n    <md-card-content>\r\n      <p>Director: {{ pelicula.director }}</p>\r\n      <p>Descripcion: {{ pelicula.descripcion }}</p>\r\n    </md-card-content>\r\n    <md-card-actions layout="row" layout-align="start center">\r\n      <md-button class="md-raised">Ver Pelicula</md-button>\r\n    </md-card-actions>\r\n  </md-card>\r\n\r\n</div>'),t.put("app/components/toolbar/toolbar.html",'<md-toolbar style="background-color: #0F3761" class="md-hue-2">\r\n  <div class="md-toolbar-tools">\r\n    <h2 ui-sref="app" flex md-truncate>Asistenciapp</h2>\r\n    <span flex></span>\r\n    <md-button ng-if="!vm.isLogged" ui-sref="login">\r\n      Iniciar Sesion\r\n    </md-button>\r\n    <md-button ng-if="vm.isLogged" ng-click="vm.logout()">\r\n      Cerrar Sesion\r\n    </md-button>\r\n  </div>\r\n</md-toolbar>')}]),angular.module("app").config(routesConfig).run(middlewareConfig);
//# sourceMappingURL=../maps/scripts/app-7f321a3c8d.js.map
